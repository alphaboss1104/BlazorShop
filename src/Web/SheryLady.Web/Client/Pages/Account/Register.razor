@page "/account/register"
@inject HttpClient HttpClient

<h1 class="text-center">Register</h1>

<div class="row">
    <div class="col-md-4"></div>
    <div class="col-md-4">
        <EditForm Model="model" OnValidSubmit="this.Submit">
            <DataAnnotationsValidator />
            <ValidationSummary />
            <div class="form-group">
                <label for="exampleInputEmail1">Email</label>
                <InputText type="email" class="form-control" aria-describedby="emailHelp" placeholder="Email..." @bind-Value="model.Email" />
                <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
            </div>
            <div class="form-group">
                <label>Username</label>
                <InputText class="form-control" placeholder="Username..." @bind-Value="model.Username" />
            </div>
            <div class="form-group">
                <label>Password</label>
                <InputText type="password" class="form-control" placeholder="Password..." @bind-Value="model.Password" />
            </div>
            <div class="form-group">
                <label>Confirm Password</label>
                <InputText type="password" class="form-control" placeholder="Confirm Password..." @bind-Value="model.ConfirmPassword" />
            </div>
            <button type="submit" class="btn btn-primary">Register</button>
        </EditForm>
    </div>
    <div class="col-md-4"></div>
</div>

@code {

    private readonly RegisterRequestModel model = new RegisterRequestModel();

    private async Task Submit()
        => await this.HttpClient.PostAsJsonAsync<RegisterRequestModel>("api/identity/register", model);
}
